openadds
========

```{r echo=FALSE}
knitr::opts_chunk$set(
  warning = FALSE,
  message = FALSE,
  collapse = TRUE,
  comment = "#>"
)
```

[![Build Status](https://travis-ci.org/sckott/openadds.svg)](https://travis-ci.org/sckott/openadds)

`openadds` is an R client for data from [Openaddresses.io](http://openaddresses.io/). Data comes from 

## Install

```{r eval=FALSE}
install.packages("devtools")
devtools::install_github("rstudio/leaflet")
devtools::install_github("sckott/openadds")
```

```{r}
library("openadds")
```

## List datasets

```{r}
dat <- oa_list()
dat[2:6]
```

## Search for datasets

```{r}
oa_search(country = "us", state = "ca")
```

## Get data

Passing in a URL

```{r}
(out1 <- oa_get(dat[5]))
```

First getting URL for dataset through `as_openadd()`, then passing to `oa_get()`

```{r}
(x <- as_openadd("us", "nm", "hidalgo"))
```

```{r}
oa_get(x)
```

## Combine multiple datasets

```{r}
out2 <- oa_get(dat[32])
(alldat <- oa_combine(out1, out2))
```

## Map data

Get some data

```{r}
(out <- oa_get(dat[400]))
```

Make an interactive map (not all data)

```{r eval=FALSE}
library("leaflet")
small <- out$data[1:10000L, ]
leaflet(small) %>%
   addTiles() %>%
   addCircles(lat = ~LAT, lng = ~LON,
      popup = unname(apply(small[, c('NUMBER', 'STREET')], 1, paste, collapse = " ")))
```

![map1](inst/img/map.png)
